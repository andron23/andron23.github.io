<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R Course</title>
  <meta name="description" content="R Course" />
  <meta name="generator" content="bookdown 0.18.1 and GitBook 2.6.7" />

  <meta property="og:title" content="R Course" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R Course" />
  
  
  

<meta name="author" content="Alexanyan Andron" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="-2-.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="-1-.html"><a href="-1-.html"><i class="fa fa-check"></i><b>1</b> Часть 1 Объекты и типы данных</a><ul>
<li class="chapter" data-level="1.1" data-path="-1-.html"><a href="-1-.html#типы-данных-в-языке-r"><i class="fa fa-check"></i><b>1.1</b> Типы данных в языке R</a></li>
<li class="chapter" data-level="1.2" data-path="-1-.html"><a href="-1-.html#создание-объектов"><i class="fa fa-check"></i><b>1.2</b> Создание объектов</a></li>
<li class="chapter" data-level="1.3" data-path="-1-.html"><a href="-1-.html#структуры-данных"><i class="fa fa-check"></i><b>1.3</b> Структуры данных</a><ul>
<li class="chapter" data-level="1.3.1" data-path="-1-.html"><a href="-1-.html#однородные-структуры."><i class="fa fa-check"></i><b>1.3.1</b> Однородные структуры.</a></li>
<li class="chapter" data-level="1.3.2" data-path="-1-.html"><a href="-1-.html#разнородные-структуры."><i class="fa fa-check"></i><b>1.3.2</b> Разнородные структуры.</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="-1-.html"><a href="-1-.html#заключение-и-summary"><i class="fa fa-check"></i><b>1.4</b> Заключение и summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="-2-.html"><a href="-2-.html"><i class="fa fa-check"></i><b>2</b> Часть 2 Загрузка данных</a><ul>
<li class="chapter" data-level="2.1" data-path="-2-.html"><a href="-2-.html#загрузка-txt-файлов"><i class="fa fa-check"></i><b>2.1</b> Загрузка txt-файлов</a></li>
<li class="chapter" data-level="2.2" data-path="-2-.html"><a href="-2-.html#загрузка-csv-файлов"><i class="fa fa-check"></i><b>2.2</b> Загрузка csv-файлов</a></li>
<li class="chapter" data-level="2.3" data-path="-2-.html"><a href="-2-.html#загрузка-xlsx-файлов"><i class="fa fa-check"></i><b>2.3</b> Загрузка xlsx-файлов</a></li>
<li class="chapter" data-level="2.4" data-path="-2-.html"><a href="-2-.html#пакет-readr"><i class="fa fa-check"></i><b>2.4</b> Пакет readr</a></li>
<li class="chapter" data-level="2.5" data-path="-2-.html"><a href="-2-.html#запись-в-файл"><i class="fa fa-check"></i><b>2.5</b> Запись в файл</a></li>
<li class="chapter" data-level="2.6" data-path="-2-.html"><a href="-2-.html#как-быть-с-другими-форматами"><i class="fa fa-check"></i><b>2.6</b> Как быть с другими форматами?</a></li>
<li class="chapter" data-level="2.7" data-path="-2-.html"><a href="-2-.html#полезные-добавления"><i class="fa fa-check"></i><b>2.7</b> Полезные добавления</a><ul>
<li class="chapter" data-level="2.7.1" data-path="-2-.html"><a href="-2-.html#работа-с-директориями"><i class="fa fa-check"></i><b>2.7.1</b> Работа с директориями</a></li>
<li class="chapter" data-level="2.7.2" data-path="-2-.html"><a href="-2-.html#выбор-файла-вручную"><i class="fa fa-check"></i><b>2.7.2</b> Выбор файла вручную</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="-2-.html"><a href="-2-.html#заключение"><i class="fa fa-check"></i><b>2.8</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="-3-.html"><a href="-3-.html"><i class="fa fa-check"></i><b>3</b> Часть 3 Обработка и очистка данных</a><ul>
<li class="chapter" data-level="3.1" data-path="-3-.html"><a href="-3-.html#подготовка-и-очистка-данных"><i class="fa fa-check"></i><b>3.1</b> Подготовка и очистка данных</a><ul>
<li class="chapter" data-level="3.1.1" data-path="-3-.html"><a href="-3-.html#gather-и-spread"><i class="fa fa-check"></i><b>3.1.1</b> gather() и spread()</a></li>
<li class="chapter" data-level="3.1.2" data-path="-3-.html"><a href="-3-.html#конвейер"><i class="fa fa-check"></i><b>3.1.2</b> Конвейер %&gt;%</a></li>
<li class="chapter" data-level="3.1.3" data-path="-3-.html"><a href="-3-.html#separate-и-unite"><i class="fa fa-check"></i><b>3.1.3</b> separate() и unite()</a></li>
<li class="chapter" data-level="3.1.4" data-path="-3-.html"><a href="-3-.html#пропущенные-значения"><i class="fa fa-check"></i><b>3.1.4</b> Пропущенные значения</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="-3-.html"><a href="-3-.html#обработка-данных---dplyr"><i class="fa fa-check"></i><b>3.2</b> Обработка данных - dplyr</a><ul>
<li class="chapter" data-level="3.2.1" data-path="-3-.html"><a href="-3-.html#mutate-и-group_by"><i class="fa fa-check"></i><b>3.2.1</b> mutate() и group_by()</a></li>
<li class="chapter" data-level="3.2.2" data-path="-3-.html"><a href="-3-.html#summarise"><i class="fa fa-check"></i><b>3.2.2</b> summarise()</a></li>
<li class="chapter" data-level="3.2.3" data-path="-3-.html"><a href="-3-.html#filter-и-select"><i class="fa fa-check"></i><b>3.2.3</b> filter() и select()</a></li>
<li class="chapter" data-level="3.2.4" data-path="-3-.html"><a href="-3-.html#arrange"><i class="fa fa-check"></i><b>3.2.4</b> arrange()</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="-3-.html"><a href="-3-.html#заключение-1"><i class="fa fa-check"></i><b>3.3</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="-4-.html"><a href="-4-.html"><i class="fa fa-check"></i><b>4</b> Часть 4 Функции</a><ul>
<li class="chapter" data-level="4.1" data-path="-4-.html"><a href="-4-.html#создание-пользовательских-функций"><i class="fa fa-check"></i><b>4.1</b> Создание пользовательских функций</a></li>
<li class="chapter" data-level="4.2" data-path="-4-.html"><a href="-4-.html#анонимные-функции"><i class="fa fa-check"></i><b>4.2</b> Анонимные функции</a></li>
<li class="chapter" data-level="4.3" data-path="-4-.html"><a href="-4-.html#заключение-2"><i class="fa fa-check"></i><b>4.3</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="-5-.html"><a href="-5-.html"><i class="fa fa-check"></i><b>5</b> Часть 5 Базовая графика</a><ul>
<li class="chapter" data-level="5.1" data-path="-5-.html"><a href="-5-.html#линейные-графики-диаграмма-рассеяния-совмещение-графиков"><i class="fa fa-check"></i><b>5.1</b> Линейные графики, диаграмма рассеяния, совмещение графиков</a><ul>
<li class="chapter" data-level="5.1.1" data-path="-5-.html"><a href="-5-.html#линейные-графики"><i class="fa fa-check"></i><b>5.1.1</b> Линейные графики</a></li>
<li class="chapter" data-level="5.1.2" data-path="-5-.html"><a href="-5-.html#совмещение-графиков"><i class="fa fa-check"></i><b>5.1.2</b> Совмещение графиков</a></li>
<li class="chapter" data-level="5.1.3" data-path="-5-.html"><a href="-5-.html#диаграмма-рассеяния"><i class="fa fa-check"></i><b>5.1.3</b> Диаграмма рассеяния</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="-5-.html"><a href="-5-.html#гистограммы"><i class="fa fa-check"></i><b>5.2</b> Гистограммы</a></li>
<li class="chapter" data-level="5.3" data-path="-5-.html"><a href="-5-.html#столбчатые-графики"><i class="fa fa-check"></i><b>5.3</b> Столбчатые графики</a></li>
<li class="chapter" data-level="5.4" data-path="-5-.html"><a href="-5-.html#заключение-3"><i class="fa fa-check"></i><b>5.4</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="-6-if.html"><a href="-6-if.html"><i class="fa fa-check"></i><b>6</b> Часть 6 Циклы и оператор if</a><ul>
<li class="chapter" data-level="6.1" data-path="-6-if.html"><a href="-6-if.html#оператор-if"><i class="fa fa-check"></i><b>6.1</b> Оператор if</a></li>
<li class="chapter" data-level="6.2" data-path="-6-if.html"><a href="-6-if.html#цикл-for"><i class="fa fa-check"></i><b>6.2</b> Цикл for</a></li>
<li class="chapter" data-level="6.3" data-path="-6-if.html"><a href="-6-if.html#цикл-while"><i class="fa fa-check"></i><b>6.3</b> Цикл while</a></li>
<li class="chapter" data-level="6.4" data-path="-6-if.html"><a href="-6-if.html#заключение-4"><i class="fa fa-check"></i><b>6.4</b> Заключение</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Course</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">R Course</h1>
<p class="author"><em>Alexanyan Andron</em></p>
</div>
<div id="часть-1-объекты-и-типы-данных" class="section level1">
<h1><span class="header-section-number">1</span> Часть 1 Объекты и типы данных</h1>
<div id="типы-данных-в-языке-r" class="section level2">
<h2><span class="header-section-number">1.1</span> Типы данных в языке R</h2>
<p>Каждый язык программирования работает с определенным стандартным набором типов данных. Для каждого типа определены свои операции (например, арифмитические действия или сцепка текста), стандартные функции и прочие правила. В большинстве языков эти типы схожи: текст, числа, даты и так далее. Давайте подробней рассмотрим основные типы данных языка R, с которыми нам придется работать больше всего:</p>
<ul>
<li><strong>numeric</strong> - численный тип данных. Аналоги - <em>double</em> и <em>real</em>. Включает в себя и целые числа, и дроби. Для проверки, является ли объект типом <em>numeric</em>, используют функцию <strong>is.numeric()</strong>:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">is.numeric</span>(<span class="fl">3.5</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">is.numeric</span>(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<ul>
<li><strong>integer</strong> - целочисленные данные. Включает в себя только целые числа. Диапазон данных +/- <span class="math inline">\(2*10^9\)</span>. Скорее всего, Вам такого разбега хватит :) Аналогично предыдущему случаю, для проверки целочисленности используют функцию <strong>is.integer()</strong>, однако, она проверяет, явлется ли объект типом <em>integer</em> - а по умолчанию числа являются <em>numeric</em>, так что при попытке <strong>is.integer(3)</strong> Вы получите <em>FALSE</em>.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">#По умолчанию 3 - numeric, так что получим FALSE. </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">is.integer</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">#Переведем в целые числа и проверим (хотя получается масло масляное)</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">is.integer</span>(<span class="kw">as.integer</span>(<span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<ul>
<li><strong>character</strong> - символьный тип данных. Состоит из последовательностей различных символов. Может быть и одним символом. Помимо букв, числа, а также любые символы могут содержаться в <em>character</em>. Однако, надо помнить, что никаких вычислений с <em>character</em> мы делать не можем - сначала символы надо перевести в число с помощью функции <strong>as.numeric()</strong> и только потом можно делать расчеты.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">is.character</span>(<span class="st">&quot;jk15&quot;</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">is.character</span>(<span class="st">&quot;3.5&quot;</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co">#Переведем char в numeric и возведем в квадрат</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">as.numeric</span>(<span class="st">&quot;3.5&quot;</span>)<span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 12.25</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">#Иначе будет ошибка </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">&quot;3.5&quot;</span><span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## Error in &quot;3.5&quot;^2: non-numeric argument to binary operator</code></pre>
<ul>
<li><strong>complex</strong> - специальный тип для комплексных чисел. Как и везде, проверка осуществляется с помощью <strong>is.complex()</strong>, а представить обычное число в комплексном виде (с нулевой мнимой частью) можно с помощью <strong>as.complex()</strong>:</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">as.complex</span>(<span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 1+0i</code></pre>
<ul>
<li><strong>logical</strong> - логический или булевский тип данных. Переменные такого типа могут принимать только два значения - <em>TRUE</em> или <em>FALSE</em>. Если перевести <em>logic</em> в <em>integer</em>, то из <em>TRUE</em> и <em>FALSE</em> получится 1 и 0, соответственно.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">#Верно ли: 2=1? Ответ - булева переменная: либо ДА, либо НЕТ. Проверим, действительно ли это логический тип данных? </span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">is.logical</span>(<span class="dv">2</span><span class="op">==</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">#А является ли logic текстовый тип данных? </span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">is.logical</span>(<span class="st">&quot;test&quot;</span>)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co">#Еще пример: верно ли, что 1 не больше 2? Такая запись - логический тип? </span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="kw">is.logical</span>(<span class="op">!</span><span class="dv">1</span><span class="op">&gt;</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>А что делать, если у нас вообще нет догадок, какой перед нами тип данных? Вообще, такую ситуацию, конечно, сложно представить, но вдруг… На этот случай существует функция <strong>class</strong>, которая позволяет определить тип данных.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co">#Как я и говорил - по умолчанию любое число идет как numeric</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">class</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co">#Так же и для чисел с плавающей точкой</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">class</span>(<span class="fl">3.5</span>)</a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co">#Посмотрим, какая реакция будет на комплексные числа</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">class</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>2i)</a></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co">#На строки: </span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="kw">class</span>(<span class="st">&quot;stroka&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co">#На булевы переменные: </span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">class</span>(<span class="dv">3</span><span class="op">&gt;</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
</div>
<div id="создание-объектов" class="section level2">
<h2><span class="header-section-number">1.2</span> Создание объектов</h2>
<p>Мы с Вами разобрались с основными типами данных, теперь давайте немного поговорим про создание простейших объектов, перед тем как переходить к более сложным конструкциям.</p>
<p>До этого мы везде использовали числа, текст и логические выражения напрямую. Однако, при написании кода, нам постоянно придется присваивать то или иное значение каким-то переменным, чтобы не создавать их многократно и иметь возможность производить различные действия (например, арифметические).</p>
<p>Как мы обсуждали в вводной лекции, язык R - интерпретируемый язык: он считывает и обрабатывает каждую строку в отдельности. Я часто привожу аналогию с калькулятором - ввел какие-то команды, интерпретатор их выполнил и запомнил. Удобно. В соответствии с этой концепцией, чтобы присвоить какой-то переменной значение, нам нужно просто написать конструкцию вида:</p>
<pre><code>переменная &lt;- значение
</code></pre>
<p>Оператор <em>&lt;-</em> - оператор присваивания, как бы аналог <em>=</em>. Между ними есть некоторая разница, и использование <em>=</em> вместо стрелочки иногда может вызывать проблемы. Но на практике, скорее всего, Вы встретите это очень не скоро, так что можете использовать знак равенства. И я Вам этого не говорил :)</p>
<p>Кстати, обратите внимание, при создании переменной мы не указываем в явном виде тип данных (как, например, в С++: <code>int i = 5</code>), что очень удобно. Однако, иногда с этим могут возникать проблемы - особенно на этапе загрузке данных из файлов нужно следить, чтобы все типы подгрузились правильно, а то потом долго и больно придется искать ошибку.</p>
<p>Итак, пример:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">y &lt;-<span class="st"> &quot;abc&quot;</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3">z &lt;-<span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span>3i</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">a &lt;-<span class="st"> </span><span class="op">!</span>(<span class="dv">1</span><span class="op">==</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb36-5" data-line-number="5"></a>
<a class="sourceLine" id="cb36-6" data-line-number="6"><span class="kw">print</span>(<span class="kw">c</span>(a,x,y,z))</a></code></pre></div>
<pre><code>## [1] &quot;TRUE&quot; &quot;5&quot;    &quot;abc&quot;  &quot;5+3i&quot;</code></pre>
<p>Мы видим, что каждой переменной присвоилось некоторое значение, и с помощью команды print() мы вывели уже сами переменные.</p>
<p>Однако, скорее всего, Вы обратили внимание, что в функции print() я использую какую-то пока что неизвестную нам конструкцию с(). Теперь наших знаний достаточно: мы можем двигаться дальше и обсудить это более подробно!</p>
</div>
<div id="структуры-данных" class="section level2">
<h2><span class="header-section-number">1.3</span> Структуры данных</h2>
<p>Итак, давайте начнем с определения.</p>
<p><strong>Структура данных</strong> - программная единица, позволяющая работать с большим количеством однородных/логически связанных данных. Структуры данных также являются типами данных, но составными, поэтому под <strong>типами данных</strong> обычно подразумевают простые типы, рассмотренные выше, а <strong>структуры данных</strong> относят в отдельную группу. К стурктурам данных относятся <em>векторы, матрицы, массивы, фреймы, списки и факторы</em> - это основное. Рассмотрим все по порядку.</p>
<div id="однородные-структуры." class="section level3">
<h3><span class="header-section-number">1.3.1</span> Однородные структуры.</h3>
<div id="векторы." class="section level4">
<h4><span class="header-section-number">1.3.1.1</span> Векторы.</h4>
<p>Вектор - упорядоченная последовательность объектов одного типа. Обратите внимание - именно одного типа! То есть каждый вектор может состоять только из строк, только из чисел, только из дат, только из логических значений и так далее. Смеси быть не может! Вектор является, наверно, простейшей, но и самой основной структурой в R. На основе векторов создаются более сложные конструкции - фреймы, матрицы и так далее.</p>
<p><strong>Замечание.</strong> R вообще не работает со скалярами (т.е. одиночными значениями). Если у нас есть одно число или одна строка - на самом деле, это просто вектор одиночной длины. Обратите внимание, если Вы присвоите какой-то переменной значение, а потом вызовете ее, то слева будет стоять индекс 1. Этот индекс и показывает, что наше значение - всего лишь первый элемент в списке.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div id="создание-вектора." class="section level5">
<h5><span class="header-section-number">1.3.1.1.1</span> Создание вектора.</h5>
<p>Существует множество способов создать вектор. Вот основные:</p>
<ul>
<li>Перечисление объектов</li>
<li>Создание пустого вектора и заполнение его в процессе выполнения программы</li>
<li>Генерация последовательности</li>
</ul>
<p>Для <strong>перечисления объектов</strong> удобно пользоваться функцией с() - как раз той, о которой шла речь в конце предыдущего пункта.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>Таким образом мы можем перечислять любые данные - численные, булевские, даты, символьные и так далее. Главное, чтобы было все одинаково. Иначе - ошибка.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&quot;a&quot;</span>,<span class="dv">2</span><span class="op">+</span>3i)</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] &quot;1&quot;    &quot;2&quot;    &quot;a&quot;    &quot;2+3i&quot;</code></pre>
<p>Но что мы видим - ошибки нет! А почему, я же ранее столько раз сказал, что все должно быть одинаково… Причина простая - автоматически все содержимое вектора приводится к одному типу данных. Если мы сделаем <code>class(x)</code>, то увидим, что все наши элементы вектора стали символьными - и числа, и комплексное число, и символы. Поэтому ошибку мы не получили, но стоит быть аккуратным - малейшее направильное действие приведет к ошибке:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&quot;a&quot;</span>,<span class="dv">2</span><span class="op">+</span>3i) <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## Error in c(1, 2, &quot;a&quot;, 2 + (0+3i)) + 1: non-numeric argument to binary operator</code></pre>
<p>Давайте теперь зададим вектор другим способом, например, <strong>создадим пустой вектор и будем его заполнять в процессе</strong>.</p>
<p>В принципе, можно опять воспользоваться функцией <strong>с()</strong>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="co">#Создаем пустой вектор</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>()</a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="co">#Добавляем вручную первый и второй элемент </span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4">x[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb48-5" data-line-number="5">x[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb48-6" data-line-number="6"></a>
<a class="sourceLine" id="cb48-7" data-line-number="7"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<p>Но давайте для разнообразия воспользуемся другим способом - функцией <strong>vector()</strong>. У нее два аргумента - <em>mode</em> (тип данных, который будет в этом векторе “лежать”) и <em>length</em> (количество элементов, которое планируется в векторе).</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co">#Создаем пустой вектор с целыми числами</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&#39;integer&#39;</span>, <span class="dt">length =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="co">#По умолчанию заполнен нулями</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 0 0 0 0 0</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co">#Создаем пустой вектор с символьными данными</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&#39;character&#39;</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="co">#По умолчанию заполнен пустыми строками</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>## [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</code></pre>
<p>Обратите внимание, при создании второго вектора мы опустили название параметров и оставили только значения. Это общий принцип - если Вы указываете аргументы в том порядке, в котором требует функция, Вы можете не писать названия самих аргументов для краткости. Но иногда, особенно когда функции редкие, удобней прописывать аргументы в явном виде, чтобы потом не забыть самим и коллегам проще было смотреть Ваш код.</p>
<p>Итак, нам осталось рассмотреть еще один способ задания вектора - <strong>генерация последовательности</strong>. Тут также есть несколько вариантов.</p>
<ul>
<li>Можно использовать оператор <strong>:</strong></li>
<li>Можно использовать фунцию <strong>seq()</strong></li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="co">#Создаем последовательность с помощью оператора : </span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2">indexes &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">7</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3">indexes</a></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6 7</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">indexes &lt;-<span class="st"> </span><span class="dv">5</span><span class="op">:-</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">indexes</a></code></pre></div>
<pre><code>## [1]  5  4  3  2  1  0 -1 -2 -3</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="co">#У функции seq() нужно задать аргументы from, to и by (т.е. шаг разбиения). </span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="co">#Это не обязательные аргументы, но скорее всего, они Вам нужны :) </span></a>
<a class="sourceLine" id="cb58-3" data-line-number="3">indexes &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">2</span>, <span class="dt">by =</span> <span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb58-4" data-line-number="4">indexes</a></code></pre></div>
<pre><code>## [1] 1.0 1.2 1.4 1.6 1.8 2.0</code></pre>
<p>У функции <strong>seq()</strong> есть и другие параметры, которые делают процесс генерации более гибким. Например, параметр <em>length.out</em> - количество элементов, которые нужно сгенерировать.</p>
<p><strong>Замечание.</strong> С помощью <strong>seq()</strong> мы можем генерировать не только последовательности чисел, но, например, и дат:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="co">#5 дат через 3 дня каждая, начиная с заданной даты</span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="kw">seq</span>(<span class="dt">from =</span> <span class="kw">as.Date</span>(<span class="st">&#39;2020/01/01&#39;</span>), <span class="dt">by =</span> <span class="dv">3</span>, <span class="dt">length.out =</span> <span class="dv">5</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2020-01-01&quot; &quot;2020-01-04&quot; &quot;2020-01-07&quot; &quot;2020-01-10&quot; &quot;2020-01-13&quot;</code></pre>
<p>Помимо указанных методов генерации последовательностей, часто возникает необходимость сгенерировать последовательность случайных чисел с заданным распределением. Об этом подробней мы будем говорить позже, а пока рассмотрим самые популярные - <strong>runif()</strong> и <strong>rnorm()</strong> - равномерное и нормальное распределение.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co">#10 чисел, распределеных равномерно от 0 до 25</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="kw">runif</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">25</span>)</a></code></pre></div>
<pre><code>##  [1] 19.673632  1.383355 12.823740  5.919812 23.837869 16.921015 17.019269
##  [8]  7.633380  1.125746  7.689110</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="co">#5 чисел, распределеных нормально от 0 до 50</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="kw">rnorm</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">50</span>)</a></code></pre></div>
<pre><code>## [1]  88.742522  65.732478 -14.334862   0.390576  32.022416</code></pre>
</div>
<div id="индексация" class="section level5">
<h5><span class="header-section-number">1.3.1.1.2</span> Индексация</h5>
<p>В принципе, мы это уже делали, просто не обращали на это отдельное внимание - мы можем обращаться к любому элементу вектора по его индексу. Причем не важно - это первый элемент, 5 или последний.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="co">#Создаем вектор чисел от 1 до 10 </span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> </a>
<a class="sourceLine" id="cb66-3" data-line-number="3"></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="co">#Вызываем 1 элемент </span></a>
<a class="sourceLine" id="cb66-5" data-line-number="5">x[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="co">#Вызываем 3 элемент </span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">x[<span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Длину вектора мы можем узнать с помощью функции <strong>length()</strong>. Соответственно, чтобы вызвать последний элемент, можем сделать так:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="co">#Создаем вектор чисел от 1 до 10 </span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> </a>
<a class="sourceLine" id="cb70-3" data-line-number="3">len &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb70-4" data-line-number="4"></a>
<a class="sourceLine" id="cb70-5" data-line-number="5"><span class="co">#Вызываем последний элемент </span></a>
<a class="sourceLine" id="cb70-6" data-line-number="6">x[len]</a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Само собой, вызывать мы можем не только один элемент вектора, а сразу несколько. Для этого в качестве индекса нужно передать вектор индексов. Таким образом, мы можем использовать векторы, чтобы делать “срезы” или “подвекторы” исходных векторов. Причем, что важно - индексы не обязательно должны идти по порядку!</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="co">#Создаем вектор чисел от 1 до 10 </span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> </a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="co">#Создаем вектор индексов от 3 до 5</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4">indexes &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="co">#Делаем срез - выбираем из х с 3 по 5 элементы </span></a>
<a class="sourceLine" id="cb72-6" data-line-number="6">x[indexes]</a></code></pre></div>
<pre><code>## [1] 3 4 5</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="co">#Делаем срез - выбираем из х отдельные элементы </span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2">x[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">8</span>)]</a></code></pre></div>
<pre><code>## [1] 1 4 7 8</code></pre>
<p><strong>Замечание.</strong> В большинстве популярных языков программирования индексация векторов начинается с 0 и заканчивается числом <em>(длина вектора - 1)</em>. Т.е. если у нас был бы вектор из 5 элементов в Python, например, то первый элемент вызывался бы с помощью x[0], а последний - x[4]. В языке R же нумерация начинается с 1. Будьте осторожны, особенно, если программируете на нескольких языках.</p>
</div>
<div id="преобразование" class="section level5">
<h5><span class="header-section-number">1.3.1.1.3</span> Преобразование</h5>
<p>Сами по себе наборы данных, которые “засунули” в векторы, никакого интереса не несут. Все это делается, чтобы что-то можно было посчитать, как-то обработать, что-то нарисовать и так далее. Давайте последовательно со всем разберемся - начнем с расчетов и преобразований.</p>
<p>Самое простое и очевидное, что можно сделать с вектором чисел (все-таки больше мы будем работать с числами, так что сосредоточимся на этом) - посчитать статистические характеристики. Это все можно делать с помощью встроенных функций:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="co">#Создаем вектор случайных равномерно распределенных от 0 до 100 чисел </span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb76-3" data-line-number="3"><span class="co">#Считаем основные статистические характеристики</span></a>
<a class="sourceLine" id="cb76-4" data-line-number="4"><span class="kw">min</span>(x) <span class="co"># минимум</span></a></code></pre></div>
<pre><code>## [1] 0.02548173</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">max</span>(x) <span class="co"># максимум</span></a></code></pre></div>
<pre><code>## [1] 99.96328</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">range</span>(x) <span class="co"># размах = максимум - минимум</span></a></code></pre></div>
<pre><code>## [1]  0.02548173 99.96327898</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="kw">mean</span>(x) <span class="co"># среднее арифметическое</span></a></code></pre></div>
<pre><code>## [1] 49.30385</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">median</span>(x) <span class="co"># медиана</span></a></code></pre></div>
<pre><code>## [1] 49.95003</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="kw">var</span>(x) <span class="co"># дисперсия (variation)</span></a></code></pre></div>
<pre><code>## [1] 830.3612</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">sd</span>(x) <span class="co"># среднеквадратическое отклонение (standard deviation)</span></a></code></pre></div>
<pre><code>## [1] 28.81599</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">sum</span>(x) <span class="co"># сумма</span></a></code></pre></div>
<pre><code>## [1] 49303.85</code></pre>
<p>Но это еще не все - это самое простое. Чем силен язык R, так это тем, что вектор в нем - базовая конструкция. Из-за этого все вычисления с векторами происходят также легко, как мы складываем числа в голове. При этом разработчики R знают свои сильные стороны и все больше и больше совершенствуют возможности языка для удобства работы с данными. Не понимаете пока, что я имею ввиду? Посмотрите на самые простые примеры, которые, тем не менее, демонстрируют суть такого подхода:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="co">#Создаем вектор х как последовательность чисел</span></a>
<a class="sourceLine" id="cb92-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> </a>
<a class="sourceLine" id="cb92-3" data-line-number="3"></a>
<a class="sourceLine" id="cb92-4" data-line-number="4"><span class="co">#Умножаем весь вектор на 15 одновременно </span></a>
<a class="sourceLine" id="cb92-5" data-line-number="5">x &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb92-6" data-line-number="6"></a>
<a class="sourceLine" id="cb92-7" data-line-number="7"><span class="co">#Поэлементно извлекаем корень из всего вектора</span></a>
<a class="sourceLine" id="cb92-8" data-line-number="8">x &lt;-<span class="st"> </span><span class="kw">sqrt</span>(x)</a>
<a class="sourceLine" id="cb92-9" data-line-number="9"></a>
<a class="sourceLine" id="cb92-10" data-line-number="10"><span class="co">#Создаем новый вектор такой же размерности и делим один на другой</span></a>
<a class="sourceLine" id="cb92-11" data-line-number="11">y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">3</span>, <span class="dt">by =</span> <span class="fl">0.5</span>, <span class="dt">length.out =</span> <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb92-12" data-line-number="12">x &lt;-<span class="st"> </span>x<span class="op">/</span>y</a>
<a class="sourceLine" id="cb92-13" data-line-number="13"></a>
<a class="sourceLine" id="cb92-14" data-line-number="14"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>##  [1] 1.290994 1.564922 1.677051 1.721326 1.732051 1.724879 1.707825
##  [8] 1.685300 1.659850 1.632993</code></pre>
<p>Вы уже начали понимать, что я имел ввиду? :) Никаких циклов, никаких специальных функций - просто работает с вектором, будто это одно число! Это очень ценно, на самом деле, в реальных задачах. ведь это напрямую влияет на удобство аналитика и на читаемость кода. Это очень “тепличные” примеры, но таким же способом можно работать и с более сложными конструкциями, пользовательскими функциями и так далее. Возможности огромны!</p>
<p>Что еще хотелось бы сказать про вектора - хотелось бы остановиться на операторе <strong>ifelse</strong> и на <strong>описательных статистиках</strong>.</p>
<p>С <strong>ifelse</strong> все просто - этот оператор позволяет в компактной форме проверить некоторое условие и создать новый вектор, заполнив его значениями, на основании проверки.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="co">#Создаем вектор х как последовательность 0 и 1 с помощью еще одной функции - sample</span></a>
<a class="sourceLine" id="cb94-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb94-3" data-line-number="3"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>##  [1] 1 1 0 0 0 1 0 0 0 1</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="co">#Проверяем условие x == 1</span></a>
<a class="sourceLine" id="cb96-2" data-line-number="2"><span class="kw">print</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="co">#Создаем вектор, который содержит &quot;Единица&quot;, если в x стоит 1 и &quot;Ноль&quot;, если 0. </span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2">vec &lt;-<span class="st"> </span><span class="kw">ifelse</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&#39;Единица&#39;</span>, <span class="st">&#39;Ноль&#39;</span>)</a>
<a class="sourceLine" id="cb98-3" data-line-number="3"></a>
<a class="sourceLine" id="cb98-4" data-line-number="4"><span class="kw">print</span>(vec)</a></code></pre></div>
<pre><code>##  [1] &quot;Единица&quot; &quot;Единица&quot; &quot;Ноль&quot;    &quot;Ноль&quot;    &quot;Ноль&quot;    &quot;Единица&quot; &quot;Ноль&quot;   
##  [8] &quot;Ноль&quot;    &quot;Ноль&quot;    &quot;Единица&quot;</code></pre>
<p>И последнее по векторам - для получение короткого summary мы можем использовать одноименную функцию <strong>summary()</strong>. Это касается, кстати, не только векторов, но и любых структур. Для количественных переменных получим статистические данные, для качественных - количество вхождений.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="co">#Создаем численный вектор и выводим summary</span></a>
<a class="sourceLine" id="cb100-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb100-3" data-line-number="3"><span class="kw">summary</span>(x) <span class="co">#Получаем статистики</span></a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## -88.365 -28.228   7.489   4.771  34.251 100.764</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="co">#Создаем логический вектор и выводим summary</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="kw">summary</span>(x) <span class="co">#Получаем количество вхождений</span></a></code></pre></div>
<pre><code>##    Mode   FALSE    TRUE 
## logical       2       4</code></pre>
</div>
</div>
<div id="матрицы" class="section level4">
<h4><span class="header-section-number">1.3.1.2</span> Матрицы</h4>
<p>Мы со всех сторон рассмотрели вектора, давайте передем к чуть более сложной конструкции - к матрице. На самом деле, ничего сложного нет: матрица - обобщение вектора на 2 измерения. Также, как и в векторе, матрица должна содержать однородные данные (только числа, например, или только текст).</p>
<p>Матрица обычно создается с помощью функции <strong>matrix()</strong> с тремя аргументами - начальные данные, количество строк и количество столбцов.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="co">#Создаем вектор из 10 чисел и создаем на основании него матрицу 5*2</span></a>
<a class="sourceLine" id="cb104-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb104-3" data-line-number="3">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-4" data-line-number="4"><span class="kw">print</span>(mat)</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>По умолчанию матрица заполняется данными по столбцам, это видно выше. Однако, мы можем сделать заполнение по строкам (обычно, кстати, так удобней), добавив параметр <code>byrow = TRUE</code>.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">mat_byrow &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="kw">print</span>(mat_byrow)</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6
## [4,]    7    8
## [5,]    9   10</code></pre>
<p>Индексация в матрицах работает, как и в векторах, только указать нужно положение ячейки - номер соответствующих строки и столбца:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="co">#Извлекаем отдельную ячейку матрицы</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2">mat[<span class="dv">3</span>,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="co">#Извлекаем строку (первый индекс - строка)</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2">mat[<span class="dv">3</span>,]</a></code></pre></div>
<pre><code>## [1] 3 8</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="co">#Извлекаем столбец (второй индекс - столбец)</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">mat[,<span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1]  6  7  8  9 10</code></pre>
<p>Извлекать мы можем и отдельные ячейки, и строки, и столбцы. Как это делается, показано выше. Можем также извлечь, например, диапазон строк или диапазон ячеек:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="co">#Извлекаем 2 ячейки из 3 строки</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2">mat[<span class="dv">3</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] 3 8</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="co">#Извлекаем 1,3,5 строки</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">mat[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>),]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    3    8
## [3,]    5   10</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="co">#Извлекаем 1-2 столбец</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2">mat[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    6
## [2,]    2    7
## [3,]    3    8
## [4,]    4    9
## [5,]    5   10</code></pre>
<p>К матрицам можно применять аналогичные операции, как было с векторами, например:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="co">#Возводим все элементы матрицы в квадрат</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2">mat<span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1   36
## [2,]    4   49
## [3,]    9   64
## [4,]   16   81
## [5,]   25  100</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="co">#Считаем сумму всех элементов</span></a>
<a class="sourceLine" id="cb122-2" data-line-number="2"><span class="kw">sum</span>(mat)</a></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="co">#Сортируем элементы матрицы - на выходе получим вектор</span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="kw">sort</span>(mat)</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="co">#Получаем summary</span></a>
<a class="sourceLine" id="cb126-2" data-line-number="2"><span class="kw">summary</span>(mat)</a></code></pre></div>
<pre><code>##        V1          V2    
##  Min.   :1   Min.   : 6  
##  1st Qu.:2   1st Qu.: 7  
##  Median :3   Median : 8  
##  Mean   :3   Mean   : 8  
##  3rd Qu.:4   3rd Qu.: 9  
##  Max.   :5   Max.   :10</code></pre>
<p>Также не стоит забывать про традиционные матричные операции - транспонирование, матричное умножение, поиск определителя, обращение матриц и прочее.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="co">#Создадим новую матрицу, квадратную (число строк = число столбцов)</span></a>
<a class="sourceLine" id="cb128-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb128-3" data-line-number="3">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb128-4" data-line-number="4"></a>
<a class="sourceLine" id="cb128-5" data-line-number="5"><span class="co">#Транспонируем</span></a>
<a class="sourceLine" id="cb128-6" data-line-number="6"><span class="kw">t</span>(mat)</a></code></pre></div>
<pre><code>##            [,1]      [,2]      [,3]
## [1,]  -3.308165  43.96817 -15.35432
## [2,] 153.477906 -39.42156  18.36034
## [3,] -45.241950  17.67599  46.23226</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="co">#Считаем определитель</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="kw">det</span>(mat)</a></code></pre></div>
<pre><code>## [1] -355671.3</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="co">#Обращаем</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="kw">solve</span>(mat)</a></code></pre></div>
<pre><code>##               [,1]        [,2]         [,3]
## [1,]  0.0060367112 0.022285432 -0.002612991
## [2,]  0.0064783157 0.002383108  0.005428414
## [3,] -0.0005678826 0.006454863  0.018606310</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="co">#Матрично умножаем исходную матрицу на транспонированную </span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">mat <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat)</a></code></pre></div>
<pre><code>##            [,1]       [,2]      [,3]
## [1,] 25613.2458 -6995.4880  777.0633
## [2,] -6995.4880  3799.6999 -581.6934
## [3,]   777.0633  -581.6934 2710.2792</code></pre>
<p>Не будем сейчас подробно останавливаться на математике, но отмечу - если Вы хотите работать в области, связанной с Data Science, основы линейной алгебры для Вас - must have.</p>
<p>Вернемся к матрицам. Что еще полезного может быть? Например, поиск элемента. Допустим, нам нужно найти, какая позиция в матрице у элемента, который равен <code>x[5]</code>. Сделаем это, используя <code>which()</code>!</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">which</span>(mat <span class="op">==</span><span class="st"> </span>x[<span class="dv">5</span>], <span class="dt">arr.ind =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##      row col
## [1,]   2   2</code></pre>
<p>Еще из часто используемого - функции <strong>cbind()</strong> и <strong>rbind()</strong>. Эти фукнции позволяют добавлять строки/столбцы к уже существующим матрицам, а также создавать матрицы из векторов. Зачастую это бывает очень полезно. Разница между ними на поверхности - <strong>rbind</strong> (от row) сцепляет по строкам, а <strong>cbind</strong> (от column) - по столбцам.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="co">#Создаем вектор х</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb138-3" data-line-number="3"><span class="co">#Создаем вектор у, возводя х в квадрат </span></a>
<a class="sourceLine" id="cb138-4" data-line-number="4">y &lt;-<span class="st"> </span>x<span class="op">**</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb138-5" data-line-number="5"></a>
<a class="sourceLine" id="cb138-6" data-line-number="6"><span class="co">#Объединяем</span></a>
<a class="sourceLine" id="cb138-7" data-line-number="7">z &lt;-<span class="st"> </span><span class="kw">cbind</span>(x,y) <span class="co">#по столбцам</span></a>
<a class="sourceLine" id="cb138-8" data-line-number="8">z1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(x,y) <span class="co">#по строкам</span></a>
<a class="sourceLine" id="cb138-9" data-line-number="9"></a>
<a class="sourceLine" id="cb138-10" data-line-number="10"><span class="kw">print</span>(z)</a></code></pre></div>
<pre><code>##        x   y
##  [1,]  1   1
##  [2,]  2   4
##  [3,]  3   9
##  [4,]  4  16
##  [5,]  5  25
##  [6,]  6  36
##  [7,]  7  49
##  [8,]  8  64
##  [9,]  9  81
## [10,] 10 100</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">print</span>(z1)</a></code></pre></div>
<pre><code>##   [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## x    1    2    3    4    5    6    7    8    9    10
## y    1    4    9   16   25   36   49   64   81   100</code></pre>
<p>Таким же способом мы можем присоединить к <em>z</em> и <em>z1</em> другие строки/столбцы.</p>
<p><strong>Замечание.</strong> Соединяя строки и столбцы, следите за типом данных. Если Вы добавите к численной матрице строку из символов, то вся матрица станет символьной, и при попытке, например, посчитать определитель, Вы неизбежно получите ошибку!</p>
</div>
</div>
<div id="разнородные-структуры." class="section level3">
<h3><span class="header-section-number">1.3.2</span> Разнородные структуры.</h3>
<div id="фреймы" class="section level4">
<h4><span class="header-section-number">1.3.2.1</span> Фреймы</h4>
<p>Фрейм - обобщенное понятие матрицы. Здесь у нас уже нет никаких ограничений на тип данных - можем хранить, что угодно.</p>
<p>Для создания фреймов используется функция <strong>data.frame()</strong>:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="co">#Создаем вектор х из чисел </span></a>
<a class="sourceLine" id="cb142-2" data-line-number="2">digits &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="co">#Создаем вектор у из символов</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4">letters &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)</a>
<a class="sourceLine" id="cb142-5" data-line-number="5"></a>
<a class="sourceLine" id="cb142-6" data-line-number="6"><span class="co">#Объединяем в data.frame</span></a>
<a class="sourceLine" id="cb142-7" data-line-number="7">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(digits, letters, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb142-8" data-line-number="8">df</a></code></pre></div>
<pre><code>##   digits letters
## 1      1       a
## 2      2       b
## 3      3       c
## 4      4       d</code></pre>
<p>Обратите внимание - нет никаких кавычек у чисел. Теперь все нормально - числа это числа, а буквы это буквы. Можем посмотреть структуру и убедиться в этом. При создании фрейма специально указал дополнительный аргумент <code>stringsAsFactors = FALSE</code>, чтобы символы интерпретировались именно как текст, а не как факторы (о них подробней позже).</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">str</span>(df)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  2 variables:
##  $ digits : int  1 2 3 4
##  $ letters: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<p>Еще один момент - посмотрите на заголовки строк и столбцов, теперь у нас колонки носят названия исходных векторов, а строки занумерованы цифрами. Чтобы получить названия всех столбцов, можно использовать функцию <code>colnames()</code>:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">colnames</span>(df)</a></code></pre></div>
<pre><code>## [1] &quot;digits&quot;  &quot;letters&quot;</code></pre>
<p>Мы можем добавлять к существующим фреймам новые строки и столбцы. Например, добавим столбец с числами:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="co">#Берем логарифм от вектора digits</span></a>
<a class="sourceLine" id="cb148-2" data-line-number="2">new_col &lt;-<span class="st"> </span><span class="kw">log</span>(digits)</a>
<a class="sourceLine" id="cb148-3" data-line-number="3"></a>
<a class="sourceLine" id="cb148-4" data-line-number="4">df &lt;-<span class="st"> </span><span class="kw">cbind</span>(df, new_col)</a>
<a class="sourceLine" id="cb148-5" data-line-number="5"></a>
<a class="sourceLine" id="cb148-6" data-line-number="6">df</a></code></pre></div>
<pre><code>##   digits letters   new_col
## 1      1       a 0.0000000
## 2      2       b 0.6931472
## 3      3       c 1.0986123
## 4      4       d 1.3862944</code></pre>
<p>Появился новый столбец new_col (название взято из названия вектора).</p>
<p>Обращаться к элементам мы можем, как матрицах, либо используя оператор <code>$</code> для ссылки на столбец:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1">df[<span class="dv">2</span>,<span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] 0.6931472</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1">df<span class="op">$</span>new_col</a></code></pre></div>
<pre><code>## [1] 0.0000000 0.6931472 1.0986123 1.3862944</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1">df<span class="op">$</span>digits[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<p>Чтобы присоединить к существующему фрейму строку, нужно выполнить следующие действия:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="co">#1. Создаем фрейм из одной строки. Порядок элементов должен совпадать с порядком в фрейме</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2">new_row &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dv">7</span>, <span class="st">&quot;y&quot;</span>, <span class="dv">28</span>)</a>
<a class="sourceLine" id="cb156-3" data-line-number="3"></a>
<a class="sourceLine" id="cb156-4" data-line-number="4"><span class="co">#2. Делаем названия у этого мини-фрема, как у основного</span></a>
<a class="sourceLine" id="cb156-5" data-line-number="5"><span class="kw">colnames</span>(new_row) &lt;-<span class="st"> </span><span class="kw">colnames</span>(df)</a>
<a class="sourceLine" id="cb156-6" data-line-number="6"></a>
<a class="sourceLine" id="cb156-7" data-line-number="7"><span class="co">#3. Используем rbind</span></a>
<a class="sourceLine" id="cb156-8" data-line-number="8">df &lt;-<span class="st"> </span><span class="kw">rbind</span>(df, new_row)</a>
<a class="sourceLine" id="cb156-9" data-line-number="9"></a>
<a class="sourceLine" id="cb156-10" data-line-number="10">df</a></code></pre></div>
<pre><code>##   digits letters    new_col
## 1      1       a  0.0000000
## 2      2       b  0.6931472
## 3      3       c  1.0986123
## 4      4       d  1.3862944
## 5      7       y 28.0000000</code></pre>
<p>Может возникнуть ситуация, когда Вам нужно отсортировать весь фрейм по значениям какого-то одного поля. Тогда делаем так:</p>
<ul>
<li>Сортируем нужное поле</li>
<li>Индексируем строки фрейма полученной последовательностью индексов</li>
</ul>
<p>Например:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="co">#Узнаем последовательность элементов в new_col</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2">indexes &lt;-<span class="st"> </span><span class="kw">order</span>(df<span class="op">$</span>new_col, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb158-3" data-line-number="3">indexes</a></code></pre></div>
<pre><code>## [1] 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="co">#Выводим весь фрейм на основании полученных индексов </span></a>
<a class="sourceLine" id="cb160-2" data-line-number="2">df[indexes, ]</a></code></pre></div>
<pre><code>##   digits letters    new_col
## 5      7       y 28.0000000
## 4      4       d  1.3862944
## 3      3       c  1.0986123
## 2      2       b  0.6931472
## 1      1       a  0.0000000</code></pre>
<p>К фреймам можно применять функцию <code>summary()</code>, как и к однородным структурам:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="kw">summary</span>(df)</a></code></pre></div>
<pre><code>##      digits      letters             new_col       
##  Min.   :1.0   Length:5           Min.   : 0.0000  
##  1st Qu.:2.0   Class :character   1st Qu.: 0.6931  
##  Median :3.0   Mode  :character   Median : 1.0986  
##  Mean   :3.4                      Mean   : 6.2356  
##  3rd Qu.:4.0                      3rd Qu.: 1.3863  
##  Max.   :7.0                      Max.   :28.0000</code></pre>
<p>Еще из полезного - мы можем менять названия столбцов в фреймах:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1"><span class="kw">colnames</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;col1&quot;</span>, <span class="st">&quot;col2&quot;</span>, <span class="st">&quot;col3&quot;</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2">df</a></code></pre></div>
<pre><code>##   col1 col2       col3
## 1    1    a  0.0000000
## 2    2    b  0.6931472
## 3    3    c  1.0986123
## 4    4    d  1.3862944
## 5    7    y 28.0000000</code></pre>
<p>Видно, что названия поменялись.</p>
<p>Вообще, основная работа аналитиков и Data Scientist-ов происходит именно с фреймами. Огромное количество библиотек заточено именно под работу с этим типом данных; существуют более продвинутые и удобные конструкции (о них поговорим позже). Соответственно, стоит особенно внимательно на стадии изучения поработать с этим типом - он бывает немного непривычен, но, уверен, Вы быстро его освоите.</p>
</div>
<div id="списки" class="section level4">
<h4><span class="header-section-number">1.3.2.2</span> Списки</h4>
<p>Списки или lists - самые общие контейнеры данных. Они могут содержать в себе разнородную информацию разного типа и разной длины. В один список мы можем поместить одновременно и фрейм, и вектор, и одно число, и что угодно еще. Ничего нового и сложного в работе с list нет, поэтому просто продемонстрируем, как с этим работать.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">dataframe =</span> df, <span class="dt">vector =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>), <span class="dt">digit =</span> <span class="dv">3</span>, <span class="dt">letters =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="dt">date =</span> <span class="kw">Sys.Date</span>())</a>
<a class="sourceLine" id="cb166-2" data-line-number="2"></a>
<a class="sourceLine" id="cb166-3" data-line-number="3"><span class="kw">str</span>(l)</a></code></pre></div>
<pre><code>## List of 5
##  $ dataframe:&#39;data.frame&#39;:   5 obs. of  3 variables:
##   ..$ col1: num [1:5] 1 2 3 4 7
##   ..$ col2: chr [1:5] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##   ..$ col3: num [1:5] 0 0.693 1.099 1.386 28
##  $ vector   : int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ digit    : num 3
##  $ letters  : chr [1:2] &quot;a&quot; &quot;b&quot;
##  $ date     : Date[1:1], format: &quot;2020-05-11&quot;</code></pre>
<p>Мы создали <code>list l</code>, заполнили его самыми разными данными (причем всем дали имена) - и датафреймом, и вектором, и числом, и последовательностью символов, и даже датой! При отображении структуры это все хорошо видно.</p>
<p>Извлечь элемент списка мы можем либо с помощью индекса и двойных квадратных скобок <code>[[]]</code>, либо с помощью оператора <code>$</code>.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1">l<span class="op">$</span>vector</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1">l[[<span class="st">&#39;dataframe&#39;</span>]]</a></code></pre></div>
<pre><code>##   col1 col2       col3
## 1    1    a  0.0000000
## 2    2    b  0.6931472
## 3    3    c  1.0986123
## 4    4    d  1.3862944
## 5    7    y 28.0000000</code></pre>
<p>Функционал list достаточно удобен, этот формат часто возвращается функциями, но проводить обработку данных в таком виде не очень удобно - обычно стараются придерживаться фреймов.</p>
</div>
<div id="факторы" class="section level4">
<h4><span class="header-section-number">1.3.2.3</span> Факторы</h4>
<p>В статистических и прочих ислледования все данные часто группируют по некоторым признакам, например, пол/социальный статус/место жительства и так далее. В R существует специальный класс, факторы, который предназначен для хранения кодов уровней номинальных признаков. Часто эти коды хранят в виде чисел, но удобней делать это в виде текста, чтобы не было путаницы. Пока это выглядит не очень понятно, я думаю, так что рассморим пример.</p>
<p>Пусть мы провели опрос - довольны ли местные жители уровнем зарплат. Опросили 10 человек - 4 не довольны, а 6 довольны. У нас, по сути, две категории, и мы можем их “закодировать”, например, с помощью 0 и 1. Давайте занесем наши результаты в среду R:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1">results &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb172-2" data-line-number="2">results</a></code></pre></div>
<pre><code>##  [1] 0 0 1 1 1 0 0 1 1 1</code></pre>
<p>Однако, у нас получился вектор чисел, а мы-то хотели “закодировать”. В таком случае, нам нужно в явном виде указать программе, что у нас не просто вектор чисел, а именно “уровни”.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1">results &lt;-<span class="st"> </span><span class="kw">factor</span>(results, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb174-2" data-line-number="2">results</a></code></pre></div>
<pre><code>##  [1] 0 0 1 1 1 0 0 1 1 1
## Levels: 0 1</code></pre>
<p>Теперь мы видим, что у нас появилась информация об уровнях и система воспринимает этот вектор именно как набор “кодов”. Но кодировка числами может привести к ошибкам или недопониманиям - давайте перекодируем лучше словами.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1"><span class="kw">levels</span>(results) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;no&quot;</span>, <span class="st">&quot;yes&quot;</span>)</a>
<a class="sourceLine" id="cb176-2" data-line-number="2">results</a></code></pre></div>
<pre><code>##  [1] no  no  yes yes yes no  no  yes yes yes
## Levels: no yes</code></pre>
<p>Теперь уровни из 0 и 1 превратились да/нет. Так намного лучше.</p>
<p>На самом деле, это все выглядит несколько непонятно и бесполезно, но это не так. По ходу работы с разными библиотеками, Вы поймете, что это:</p>
<ul>
<li>удобно</li>
<li>необходимо при работе некоторых важных функций</li>
</ul>
<p>Так что принебрегать факторами не стоит, но работать с ними надо аккуратно - с ними постоянно бывают ошибки!</p>
</div>
</div>
</div>
<div id="заключение-и-summary" class="section level2">
<h2><span class="header-section-number">1.4</span> Заключение и summary</h2>
<p>Итак, мы рассмотрели все основные типы данных, в том числе сложные, а также освоили весь основной функционал для дальнейшей работы. Давайте подытожим все вышесказанное:</p>
<p><strong>основные типы данных</strong></p>
<ul>
<li>numeric</li>
<li>integer</li>
<li>character</li>
<li>logical</li>
<li>complex</li>
</ul>
<p><strong>Виды структур данных</strong></p>
<ul>
<li>однородные структуры</li>
<li>неоднородные структуры</li>
</ul>
<p><strong>Основные однородные структуры</strong></p>
<ul>
<li>вектора</li>
<li>матрицы</li>
</ul>
<p><strong>Основные неоднородные структуры</strong></p>
<ul>
<li>фреймы</li>
<li>списки</li>
<li>факторы</li>
</ul>
<p>Есть еще некоторые структуры, которые мы тут не рассматривали (например, <code>tibble</code>). В любом случае, рассмотренные выше понятия - основы. Все что будет встречаться нам далее - обертки и модификации основных инструментов.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="-2-.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"theme": "readable",
"highlight": "textmate",
"split_by": "rmd",
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
